{% if not query %}
    <p class="text-muted">
        Enter a query to search your documents.
    </p>

{% elif not results %}
    <p class="text-muted">
        No results found for "{{ query }}".
        <br>
        Try rephrasing your query or lowering the threshold.
    </p>

{% else %}

    {% for r in results %}
        <div class="card mb-3">
        <div class="card-body">

            <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-1">
                    {{ r.document_title }}
                </h5>
                
                <small class="text-muted">
                    best score: {{ r.best_score }}
                    ({{ r.matched_chunks }} relevant section{{ r.matched_chunks != 1 and "s" or "" }})
                </small>
            </div>

            <ul class="mt-3 mb-0">
                {% for c in r.chunks %}
                    <li class="mb-2">
                        <div class="text-muted small">
                            score: {{ c.score }}
                        </div>

                        <p class="mb-1">
                            {{ c.snippet.html }}
                            {% if c.snippet.truncated %}â€¦{% endif %}
                        </p>
                    </li>
                {% endfor %}
            </ul>
            <a href="{{ url('document_manager:document_detail', args=[r.document_id]) }}" class="small">
                View document
            </a>
        </div>
    </div>
    {% endfor %}
{% endif %}